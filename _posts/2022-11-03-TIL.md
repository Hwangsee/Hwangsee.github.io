---
title: 221103 TIL ë°”ë‹ë¼ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ì¸í”¼ë‹ˆí‹° ìŠ¤í¬ë¡¤ êµ¬í˜„í•˜ê¸°
tags: [JavaScript, TIL]
---

### ì˜¤ëŠ˜ í•œ ì¼

- ë°”ë‹ë¼ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ì¸í”¼ë‹ˆí‹° ìŠ¤í¬ë¡¤ ì‹¤ìŠµ

---

  
### ğŸ”Â ì¸í”¼ë‹ˆí‹° ìŠ¤í¬ë¡¤ ì ìš© í™”ë©´

![Nov-03-2022 22-34-46.gif](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/ae278bde-8a2d-44e2-8f09-5617d43c58ea/Nov-03-2022_22-34-46.gif?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20221103%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20221103T134924Z&X-Amz-Expires=86400&X-Amz-Signature=7affed3fe322c06d13a05e68f16567978ef922bda477e05b5775403cad533dd7&X-Amz-SignedHeaders=host&response-content-disposition=filename%3D%22Nov-03-2022%252022-34-46.gif%22&x-id=GetObject)

- ê²Œì‹œê¸€ ë°ì´í„°ëŠ” í˜ì´ì§€ë„¤ì´ì…˜ì´ ê°€ëŠ¥í•œ ë”ë¯¸ ë°ì´í„°ë¥¼ ì œê³µ í•´ì£¼ëŠ” [JSONPlaceholder](https://jsonplaceholder.typicode.com/)ì—ì„œ ê°€ì ¸ì˜¤ë„ë¡ í•œë‹¤.

### ë°ì´í„°ë¥¼ 5ê°œì”© ë³´ì—¬ì£¼ê¸°

ê°€ì ¸ì˜¨ ë°ì´í„°ë¥¼ DOMì— ë³´ì—¬ì£¼ëŠ” í•¨ìˆ˜ë¥¼ ì‘ì„±í•œë‹¤.

```jsx
async function showPosts() {
    const posts = await getPosts();

    posts.forEach(post => {
       const postEl = document.createElement('div');
       postEl.classList.add('post');
       postEl.innerHTML = `
        <div class="number">${post.id}</div>
        <div class="post-info">
            <h2 class="post-title">${post.title}</h2>
            <p class="post-body">${post.body}</p>
        </div>
       `
       postsContainer.appendChild(postEl);
    });
}
```

- `classList.add('className')` : classListëŠ” css classì˜ í˜„ì¬ ê°’ì„ ë°˜í™˜í•˜ëŠ” ì½ê¸° ì „ìš© í”„ë¡œí¼í‹°ì´ë‹¤.
    - add(), remove() ë©”ì„œë“œë¡œ classë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ì‚­ì œí•  ìˆ˜ ìˆë‹¤.

### ë°ì´í„° ê°€ì ¸ì˜¤ê¸° & ë¡œë”© ë°”

ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë™ì•ˆ ë¡œë”© ë°”ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” í•¨ìˆ˜ë¥¼ ìƒì„±í•œë‹¤.

```jsx
// fetch ë˜ëŠ”ë™ì•ˆ ë¡œë”©  
function showLoading() {
    loading.classList.add('show');

    setTimeout(() => {
        loading.classList.remove('show');

        setTimeout(() => {
            page = page + 1;
            showPosts();
        }, 300);
    }, 1000);
}
```

### í¬ë¡¤ì´ ë°”ë‹¥ì— ë‹¿ì•˜ì„ ë•Œ ë°ì´í„° í˜¸ì¶œ

```jsx
window.addEventListener('scroll', () => {
    const { scrollTop, scrollHeight, clientHeight } = document.documentElement;

    if(scrollHeight - scrollTop === clientHeight) {
        showLoading();
    }
});
```

- `scrollHeight` :  overflowë¡œ í™”ë©´ì— ë³´ì´ì§€ ì•ŠëŠ” ì½˜í…ì¸ ë¥¼ í¬í•¨í•˜ì—¬ ìš”ì†Œì˜ ë†’ì´ë¥¼ ì¸¡ì •í•œë‹¤.
- `scrollTop` : yì¶•ìœ¼ë¡œ ìŠ¤í¬ë¡¤í•œ ê±°ë¦¬ë¥¼ ì¸¡ì •í•œë‹¤.
- `clientHeight` : ìš”ì†Œ ë‚´ë¶€ì˜ ë†’ì´ì´ë‹¤.

ê·¸ë¦¼ìœ¼ë¡œ í‘œí˜„í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.

![Untitled](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/4ae16b17-2bce-469d-9fbd-6b5517f24396/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20221103%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20221103T135017Z&X-Amz-Expires=86400&X-Amz-Signature=6125266e1d83ecd997a241aef418d799fde59dc18e4f6ec494f0a70aa2522941&X-Amz-SignedHeaders=host&response-content-disposition=filename%3D%22Untitled.png%22&x-id=GetObject)

ê°„ë‹¨í•˜ê²Œ ì¸í”¼ë‹ˆíŠ¸ ìŠ¤í¬ë¡¤ì„ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.

#### ì „ì²´ ì†ŒìŠ¤ì½”ë“œ ë³´ê¸°

  /index.html

```html
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <link rel="stylesheet" href="style.css"/>
</head>
<body>
    <h1>Home</h1>

    <div class="filter-container">
        <input type="text" id="filter" class="filter" placeholder="ê²€ìƒ‰">
    </div>

    <div id="posts-container"></div>

    <div class="loader">
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
    </div>

    <script src="script.js"></script>
</body>
</html>
```

/script.js

```jsx
const postsContainer = document.getElementById('posts-container');
const loading = document.querySelector('.loader');
const filter = document.getElementById('filter');

let limit = 5;
let page = 1;

// API í˜¸ì¶œ
async function getPosts() {
    const res = await fetch(
        `https://jsonplaceholder.typicode.com/posts?_limit=${limit}&_page=${page}`
    );
    
    const data = await res.json();

    return data;
}

// ê°€ì ¸ì˜¨ Dataë¥¼ DOMì— ë³´ì—¬ì£¼ê¸°
async function showPosts() {
    const posts = await getPosts();

    posts.forEach(post => {
       const postEl = document.createElement('div');
       // classListëŠ” css classì˜ í˜„ì¬ ê°’ì„ ë°˜í™˜í•˜ê±°ë‚˜, ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì¶”ê°€, ì‚­ì œ ë“±ì˜ ì‘ì—…ì„ í•  ìˆ˜ ìˆë‹¤. 
       postEl.classList.add('post');
       postEl.innerHTML = `
        <div class="number">${post.id}</div>
        <div class="post-info">
            <h2 class="post-title">${post.title}</h2>
            <p class="post-body">${post.body}</p>
        </div>
       `
       postsContainer.appendChild(postEl);
    });
}

// fetch ë˜ëŠ”ë™ì•ˆ ë¡œë”©  
function showLoading() {
    loading.classList.add('show');

    setTimeout(() => {
        loading.classList.remove('show');

        setTimeout(() => {
            page = page + 1;
            showPosts();
        }, 300);
    }, 1000);
}

// ì…ë ¥ ê°’ ê²€ìƒ‰
function filterPosts(e) {
    const term = e.target.value.toUpperCase();
    const posts = document.querySelectorAll('.post');
  
    posts.forEach(post => {
      const title = post.querySelector('.post-title').innerText.toUpperCase();
      const body = post.querySelector('.post-body').innerText.toUpperCase();
  
      if (title.indexOf(term) > -1 || body.indexOf(term) > -1) {
        post.style.display = 'flex';
      } else {
        post.style.display = 'none';
      }
    });
}
  
showPosts();

window.addEventListener('scroll', () => {
    const { scrollTop, scrollHeight, clientHeight } = document.documentElement;

    if(scrollHeight - scrollTop === clientHeight) {
        showLoading();
    }
});

filter.addEventListener('input', filterPosts);
```

/style.css

```css
@import url('https://fonts.googleapis.com/css?family=Roboto&display=swap');

* {
  box-sizing: border-box;
}

body {
  background-color: #296ca8;
  color: #fff;
  font-family: 'Roboto', sans-serif;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  margin: 0;
  padding-bottom: 100px;
}

h1 {
  margin-bottom: 0;
  text-align: center;
}

.filter-container {
  margin-top: 20px;
  width: 80vw;
  max-width: 800px;
}

.filter {
  width: 100%;
  padding: 12px;
  font-size: 16px;
}

.post {
  position: relative;
  background-color: #4992d3;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  border-radius: 3px;
  padding: 20px;
  margin: 40px 0;
  display: flex;
  width: 80vw;
  max-width: 800px;
}

.post .post-title {
  margin: 0;
}

.post .post-body {
  margin: 15px 0 0;
  line-height: 1.3;
}

.post .post-info {
  margin-left: 20px;
}

.post .number {
  position: absolute;
  top: -15px;
  left: -15px;
  font-size: 15px;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: #fff;
  color: #296ca8;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 7px 10px;
}

.loader {
  opacity: 0;
  display: flex;
  position: fixed;
  bottom: 50px;
  transition: opacity 0.3s ease-in;
}

.loader.show {
  opacity: 1;
}

.circle {
  background-color: #fff;
  width: 10px;
  height: 10px;
  border-radius: 50%;
  margin: 5px;
  animation: bounce 0.5s ease-in infinite;
}

.circle:nth-of-type(2) {
  animation-delay: 0.1s;
}

.circle:nth-of-type(3) {
  animation-delay: 0.2s;
}

@keyframes bounce {
  0%,
  100% {
    transform: translateY(0);
  }

  50% {
    transform: translateY(-10px);
  }
}
```

<br/>

### ì¶œì²˜

- [ë°”ë‹ë¼ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì´ìš©í•œ 20ê°œì˜ í”„ë¡œì íŠ¸](https://github.com/bradtraversy/vanillawebprojects)